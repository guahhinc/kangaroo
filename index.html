<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Kangaroo</title>

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kangaroo">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" href="https://avatars.githubusercontent.com/u/208152170?v=4">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/208152170?v=4" type="image/png">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />

    <!-- Link to your CSS file -->
    <link rel="stylesheet" href="style.css">
</head>

<body ontouchstart="">

    <!-- Navigation Header (Desktop Sidebar / Mobile Bottom Bar) -->
    <header class="hidden">
        <img src="https://raw.githubusercontent.com/guahhinc/fire/main/Kangaroo.png" alt="Kangaroo Logo" class="logo" id="logo-btn">
        <div class="header-actions">
            <div class="header-icon" id="home-btn">
                <span class="material-symbols-rounded">home</span>
                <span class="header-icon-label">Home</span>
            </div>
            <div class="header-icon" id="search-btn">
                <span class="material-symbols-rounded">search</span>
                <span class="header-icon-label">Search</span>
            </div>
            <div class="header-icon" id="messages-btn" style="opacity: 0.4; pointer-events: none;" title="Loading fresh messages...">
                <span class="material-symbols-rounded">send</span>
                <span class="header-icon-label">Messages</span>
                <span id="message-dot"></span>
            </div>
            <div class="header-icon" id="notifications-btn">
                <span class="material-symbols-rounded">notifications</span>
                <span class="header-icon-label">Notifications</span>
                <span id="notification-dot"></span>
            </div>
            <div class="header-icon" id="profile-nav-btn">
                <img id="nav-pfp" class="pfp pfp-sm" src="" style="width: 28px; height: 28px; vertical-align: middle;">
                <span class="header-icon-label">Profile</span>
            </div>
            <div class="header-icon" id="settings-nav-btn">
                <span class="material-symbols-rounded">settings</span>
                <span class="header-icon-label">Settings</span>
            </div>
        </div>
    </header>

    <!-- Global Announcements Banner -->
    <div id="global-banner" class="hidden"></div>

    <!-- Main Application Wrapper -->
    <div id="app-wrapper">
        
        <!-- View: Authentication (Login/Register) -->
        <div id="auth-view" class="view">
            <div class="container">
                <img src="https://raw.githubusercontent.com/guahhinc/fire/main/Kangaroo.png" alt="Kangaroo Logo" class="logo">
                <div id="auth-container">
                    <div id="login-form">
                        <input type="text" id="login-username" placeholder="Username" autocomplete="username">
                        <input type="password" id="login-password" placeholder="Password" autocomplete="current-password">
                        <button id="login-btn" class="primary">Log In</button>
                        <p id="login-error" class="error-message hidden"></p>
                        <p>Don't have an account? <a id="show-register-link">Sign up</a></p>
                    </div>
                    <div id="register-form" class="hidden">
                        <input type="text" id="register-username" placeholder="Username (no spaces)" autocomplete="username" maxlength="25">
                        <input type="text" id="register-displayname" placeholder="Display Name" maxlength="30">
                        <input type="password" id="register-password" placeholder="Password" autocomplete="new-password">
                        <input type="password" id="register-password-confirm" placeholder="Confirm Password" autocomplete="new-password">
                        <p style="font-size: 13px; color: var(--secondary-text-color); margin-top: -8px; margin-bottom: 12px; text-align: left;">
                            Use a new and unique password for Kangaroo</p>
                        <label class="form-group-tos">
                            <input type="checkbox" id="register-tos">
                            <span class="tos-checkmark"></span>
                            <span class="tos-text">I agree to the <a href="https://sites.google.com/view/guahh/terms-of-service" target="_blank" rel="noopener noreferrer">Terms of Service and Privacy Policy</a>.</span>
                        </label>
                        <button id="register-btn" class="primary" disabled>Sign Up</button>
                        <p id="register-error" class="error-message hidden"></p>
                        <p>Have an account? <a id="show-login-link">Log in</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Suspended/Banned (NO LOGOUT BUTTON HERE) -->
        <div id="suspended-view" class="view">
            <div class="container">
                <span class="material-symbols-rounded warning-icon" style="font-size: 52px;">warning</span>
                <h2>Account Banned</h2>
                <div id="ban-details-container" style="max-width: 400px; margin: 20px auto; line-height: 1.6; text-align: left;">
                    <p style="text-align: center; margin-bottom: 20px;">Contact guahhinc@gmail.com for more info or appeal.</p>
                    <p style="font-weight: 600; text-align: center;">Reason:</p>
                    <p id="ban-reason" style="margin-top: 5px; background-color: var(--border-color); padding: 12px; border-radius: 8px; white-space: pre-wrap; word-wrap: break-word; text-align: center;"></p>
                    <div id="ban-timer-container">
                        <p style="margin-top: 20px; font-weight: 600; text-align: center;">Time remaining:</p>
                        <p id="ban-countdown" style="font-size: 1.2em; font-weight: 700; margin-top: 5px; text-align: center;"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Server Outage -->
        <div id="outage-view" class="view">
            <div class="container">
                <span class="material-symbols-rounded warning-icon">warning</span>
                <h2>Server Maintenance</h2>
                <p>The server is currently undergoing maintenance, we'll be back soon.</p>
                <button id="outage-logout-btn" class="secondary">Log Out</button>
            </div>
        </div>

        <!-- View: Main Feed -->
        <div id="main-app-view" class="view">
            <div class="container">
                <main>
                    <div class="feed-nav">
                        <div class="feed-nav-tabs">
                            <div class="feed-nav-tab active" data-feed-type="foryou">For You</div>
                            <div class="feed-nav-tab" data-feed-type="following">Following</div>
                        </div>
                        <div class="feed-nav-actions">
                            <button id="open-create-post-btn" title="Create Post"><span class="material-symbols-rounded">add</span></button>
                        </div>
                    </div>
                    <div id="feed-container-wrapper">
                        <div id="feed-container">
                            <section id="foryou-feed" class="feed-page"></section>
                            <section id="following-feed" class="feed-page"></section>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- View: Create Post -->
        <div id="create-post-view" class="view">
            <div class="container">
                <a class="back-btn" data-nav="feed">&larr; Back to Feed</a>
                <section id="create-post-form">
                    <textarea id="post-content-input" placeholder="What's on your mind?"></textarea>
                    <div id="post-image-preview-container" class="hidden"></div>
                    <div class="create-post-options">
                        <div class="create-post-left-actions">
                            <button id="add-image-btn" title="Add Image URL"><span class="material-symbols-rounded">add_photo_alternate</span></button>
                            <button id="add-video-btn" title="Add Video URL"><span class="material-symbols-rounded">movie</span></button>
                        </div>
                        <div class="create-post-actions">
                            <button id="submit-post-btn" class="primary">Post</button>
                        </div>
                    </div>
                </section>
                <p id="create-post-error" class="error-message hidden" style="color: var(--error-color); text-align: center; margin-top: 10px;"></p>
            </div>
        </div>

        <!-- View: Profile -->
        <div id="profile-page-view" class="view">
            <div class="container">
                <a class="back-btn" data-nav="feed">&larr; Back to Feed</a>
                <div id="profile-content"></div>
                <div id="profile-feed"></div>
            </div>
        </div>

        <!-- View: Single Post Detail -->
        <div id="post-detail-view" class="view">
            <div class="container"></div>
        </div>

        <!-- View: Settings -->
        <div id="settings-view" class="view">
            <div class="container">
                <h2 style="margin-top: 20px;">Settings</h2>
                <div class="settings-section">
                    <h4 class="settings-section-title">üë§ Account</h4>
                    <div class="setting-row" id="settings-user-info-row"></div>
                    <div class="setting-row" id="logout-button-container">
                        <button id="logout-btn">Log Out</button>
                    </div>
                </div>
                <div class="settings-section">
                    <h4 class="settings-section-title">üîí Privacy</h4>
                    <div class="setting-row">
                        <div>
                            <span>Private Profile</span>
                            <p class="setting-description">Only friends can see your full profile.</p>
                        </div>
                        <label class="switch"><input type="checkbox" id="privacy-switch"><span class="slider"></span></label>
                    </div>
                    <div class="setting-row">
                        <div>
                            <span>Who can see your posts</span>
                            <p class="setting-description">Control who can see your posts and stories.</p>
                        </div>
                        <select id="post-visibility-select" style="padding: 5px; border-radius: 4px; border: 1px solid var(--border-color); background: var(--primary-bg-color); color: var(--primary-text-color);">
                            <option value="Everyone">Everyone</option>
                            <option value="Followers">Followers</option>
                            <option value="Friends">Friends</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h4 class="settings-section-title">üé® Customisation</h4>
                    <div class="setting-row">
                        <div>
                            <span>Dark Mode</span>
                            <p class="setting-description">Change the website theme.</p>
                        </div>
                        <label class="switch"><input type="checkbox" id="theme-switch"><span class="slider"></span></label>
                    </div>
                </div>
                <div class="settings-section">
                    <h4 class="settings-section-title">üö´ Blocked Users</h4>
                    <p class="setting-description" style="padding: 0 0 10px 0;">You won't see posts, profiles, or notifications from people you block.</p>
                    <div id="blocked-users-list"></div>
                </div>
                <div class="settings-section">
                    <h4 class="settings-section-title">‚ÑπÔ∏è About</h4>
                    <div class="setting-row">
                        <a href="https://sites.google.com/view/guahh/terms-of-service" target="_blank" style="text-decoration: none; color: var(--primary-text-color); display: flex; width: 100%; justify-content: space-between; align-items: center;">
                            <span>Terms of Service & Privacy Policy</span>
                            <span class="material-symbols-rounded">open_in_new</span>
                        </a>
                    </div>
                    <div class="setting-row">
                        <a href="https://sites.google.com/view/guahh/kangaroo-status" target="_blank" style="text-decoration: none; color: var(--primary-text-color); display: flex; width: 100%; justify-content: space-between; align-items: center;">
                            <span>Server Status Page</span>
                            <span class="material-symbols-rounded">dns</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: Hashtag Feed -->
        <div id="hashtag-feed-view" class="view">
            <div class="container">
                <a class="back-btn" data-nav="feed">&larr; Back to Feed</a>
                <h2 id="hashtag-title" style="margin-top: 20px;"></h2>
                <section id="hashtag-feed"></section>
            </div>
        </div>

        <!-- View: Search -->
        <div id="search-view" class="view">
            <div class="container">
                <h2 style="margin-top: 20px;">Search</h2>
                <input type="search" id="search-input" placeholder="Search for users or posts..." style="width: 100%; padding: 12px; font-size: 16px; border: 1px solid var(--border-color); border-radius: 10px; margin-bottom: 20px;">
                <div id="search-results"></div>
            </div>
        </div>

        <!-- View: Edit Profile -->
        <div id="edit-profile-view" class="view">
            <div class="container">
                <a class="back-btn" id="back-to-profile-btn">&larr; Back to Profile</a>
                <h2>Edit Profile</h2>
                <div class="form-group">
                    <label for="edit-pfp-url">Profile Picture URL</label>
                    <input type="url" id="edit-pfp-url" placeholder="https://example.com/image.png">
                </div>
                <div class="form-group">
                    <label>Or choose an avatar:</label>
                    <div id="pfp-choices-gallery"></div>
                </div>
                <div class="form-group">
                    <label for="edit-display-name">Display Name</label>
                    <input type="text" id="edit-display-name" maxlength="30">
                </div>
                <div class="form-group">
                    <label for="edit-description">Description</label>
                    <textarea id="edit-description"></textarea>
                </div>
                <div class="actions">
                    <button id="save-profile-btn" class="primary">Save Changes</button>
                </div>
                <p id="edit-profile-error" class="error-message hidden"></p>
            </div>
        </div>

        <!-- View: Messages -->
        <div id="messages-view" class="view">
            <div class="container">
                <div class="messages-container">
                    <div id="conversations-list">
                        <!-- Header and list body will be injected here -->
                    </div>
                    <div id="conversation-view">
                        <div id="conversation-placeholder">
                            <span class="material-symbols-rounded">chat</span>
                            <h3>Your Messages</h3>
                            <p>Select a conversation or start a new one.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="notifications-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <h2>Notifications</h2>
                    <button class="secondary" id="clear-notifications-btn" style="padding: 5px 10px; font-size: 12px;">Clear All</button>
                </div>
                <button class="close-modal-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <div id="notifications-list"></div>
        </div>
    </div>

    <div id="image-url-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Image URL</h2>
                <button class="close-modal-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <input type="url" id="image-url-modal-input" placeholder="https://example.com/image.png">
            <!-- Photo Library Section -->
            <div id="photo-library-container" style="margin-top: 15px; border-top: 1px solid var(--border-color); padding-top: 10px;">
                <p style="font-size: 14px; margin-bottom: 10px; color: var(--secondary-text-color);">Or choose from library:</p>
                <div id="photo-library-grid"></div>
            </div>
            <div class="modal-actions">
                <button id="image-url-modal-done-btn" class="primary">Done</button>
            </div>
        </div>
    </div>

    <div id="video-url-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Video URL</h2>
                <button class="close-modal-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <p style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 10px;">Supported formats: MP4, WebM (Direct URLs)</p>
            <input type="url" id="video-url-modal-input" placeholder="https://example.com/video.mp4">
            <div class="modal-actions">
                <button id="video-url-modal-done-btn" class="primary">Done</button>
            </div>
        </div>
    </div>

    <div id="report-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="report-modal-title">Report</h2>
                <button class="close-modal-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <p>Please provide a reason for your report. This helps us take appropriate action.</p>
            <textarea id="report-reason-input" placeholder="e.g., Spam, harassment, inappropriate content..."></textarea>
            <div class="modal-actions">
                <button id="submit-report-btn" class="primary">Submit Report</button>
            </div>
        </div>
    </div>

    <div id="profile-shortcut-modal" class="modal hidden">
        <div class="modal-content">
        </div>
    </div>

    <div id="ban-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="ban-modal-title">Ban User</h2>
                <button class="close-modal-btn"><span class="material-symbols-rounded">close</span></button>
            </div>
            <p>Select a duration and provide a reason for the ban. The user will be notified.</p>
            <div class="form-group">
                <label for="ban-duration-select">Ban Duration</label>
                <select id="ban-duration-select">
                    <option value="1">1 Hour</option>
                    <option value="24">1 Day (24 Hours)</option>
                    <option value="72">3 Days (72 Hours)</option>
                    <option value="168">1 Week (168 Hours)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="ban-reason-input">Reason</label>
                <textarea id="ban-reason-input" placeholder="e.g., Spamming, harassment..." required></textarea>
            </div>
            <div class="modal-actions">
                <button id="submit-ban-btn" class="primary">Submit Ban</button>
            </div>
        </div>
    </div>

    <!-- Link to your JavaScript file -->
    <script src="script.js"></script>
</body>
</html>
